{"version":3,"file":"main.js","mappings":";6lEAEO,IAAMA,EAAM,SAAAC,iTAAAC,CAAAF,OAAAC,GAAA,IAAAE,EAAAC,aAAAJ,QACf,SAAAA,OAAYK,EAAWC,GAAQ,IAAAC,EAQxB,mHARwBC,CAAA,KAAAR,SAC3BO,EAAAJ,EAAAM,KAAA,KAAMJ,IACDC,OAASA,EACdC,EAAKG,UAAWC,EAAAA,EAAAA,eAAc,gBAAiBJ,EAAKF,WACpDE,EAAKK,YAAaD,EAAAA,EAAAA,eAAc,iBAAkBJ,EAAKF,WACvDE,EAAKM,aAAcF,EAAAA,EAAAA,eAAc,UAAWJ,EAAKF,WACjDE,EAAKM,YAAYC,iBAAiB,SAAS,WACvCP,EAAKD,OAAOS,KAAK,aACrB,IAAGR,CACP,CA+BC,8JA/BAS,CAAAhB,OAAA,EAAAiB,IAAA,mBAAAC,MACD,SAAAC,iBAAiBC,GAAM,IAAAC,EAAA,KACbC,GAAWX,EAAAA,EAAAA,eAAc,gBACzBY,GAAaC,EAAAA,EAAAA,eAAcF,GAC3BG,GAAkBd,EAAAA,EAAAA,eAAc,eAAgBY,GAChDG,GAAkBf,EAAAA,EAAAA,eAAc,eAAgBY,GAChDI,GAAmBhB,EAAAA,EAAAA,eAAc,uBAAwBY,GACzDK,GAAkBjB,EAAAA,EAAAA,eAAc,sBAAuBY,GAO7D,OANAE,EAAgBI,YAAcT,EAAKU,QAAQC,MAC3CL,EAAgBG,YAAc,GAAHG,OAAMZ,EAAKU,QAAQG,MAAK,aACnDL,EAAgBC,YAAc,GAAHG,OAAMZ,EAAKc,OACtCP,EAAiBb,iBAAiB,SAAS,WACvCO,EAAKf,OAAOS,KAAK,gBAAiB,CAAEoB,UAAWf,EAAKU,QAAQM,IAChE,IACOb,CACX,GAAC,CAAAN,IAAA,SAAAC,MACD,SAAAmB,OAAOC,EAAO1B,GAAY,IAAA2B,EAAA,KACtBC,KAAK9B,SAAS+B,UAAY,GAC1BH,EAAMI,SAAQ,SAAAtB,GACV,IAAMuB,EAAcJ,EAAKpB,iBAAiBC,GAC1CmB,EAAK7B,SAASkC,YAAYD,EAC9B,IACAH,KAAK5B,WAAWiB,YAAc,GAAHG,OAAMpB,EAAU,aACtB,IAAjB0B,EAAMO,QACNL,KAAK3B,YAAYiC,UAAUC,IAAI,oBAC/BP,KAAK3B,YAAYmC,UAAW,IAG5BR,KAAK3B,YAAYiC,UAAUG,OAAO,oBAClCT,KAAK3B,YAAYmC,UAAW,EAEpC,KAAChD,MAAA,CAzCc,0CAASkD,wpECCrB,IAAMC,EAAI,SAAAlD,iTAAAC,CAAAiD,KAAAlD,GAAA,IAAAE,EAAAC,aAAA+C,MACb,SAAAA,KAAY9C,EAAWC,GAAQ,IAAAC,EAMsC,mHANtCC,CAAA,KAAA2C,OAC3B5C,EAAAJ,EAAAM,KAAA,KAAMJ,IACDC,OAASA,EACdC,EAAKwB,OAAQpB,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK0B,OAAQtB,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK6C,OAAQzC,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK8C,UAAW1C,EAAAA,EAAAA,eAAc,kBAAmBJ,EAAKF,WAAWE,CACrE,CAgBC,8JAhBAS,CAAAmC,KAAA,EAAAlC,IAAA,SAAAC,MACD,SAAAmB,OAAOiB,GAAM,IAAAjC,EAAA,KACTmB,KAAKT,MAAMF,YAAcyB,EAAKvB,MACX,OAAfuB,EAAKrB,MACLO,KAAKP,MAAMJ,YAAc,WAGzBW,KAAKP,MAAMJ,YAAc,GAAHG,OAAMsB,EAAKrB,MAAK,aAE1CO,KAAKY,MAAMG,IAAMD,EAAKF,MACtBZ,KAAKa,SAASxB,YAAcyB,EAAKD,SACjC,IAAMG,EAAkBC,EAAAA,YAAYH,EAAKD,WAAa,QACtDb,KAAKa,SAASK,UAAY,iCAAH1B,OAAoCwB,GAC3DhB,KAAKnC,UAAUS,iBAAiB,SAAS,WACrCO,EAAKf,OAAOS,KAAK,aAAc,CAAEoB,UAAWmB,EAAKlB,IACrD,GACJ,KAACe,IAAA,CAxBY,CAASD,EAAAA,2lECAnB,IAAMS,EAAY,SAAA1D,iTAAAC,CAAAyD,aAAA1D,GAAA,IAAAE,EAAAC,aAAAuD,cACrB,SAAAA,aAAYtD,GAAW,IAAAE,EAOkD,mHAPlDC,CAAA,KAAAmD,eACnBpD,EAAAJ,EAAAM,KAAA,KAAMJ,IACDuD,YAAajD,EAAAA,EAAAA,eAAc,sBAAuBJ,EAAKF,WAC5DE,EAAKsD,YAAalD,EAAAA,EAAAA,eAAc,sBAAuBJ,EAAKF,WAC5DE,EAAKuD,cAAenD,EAAAA,EAAAA,eAAc,wBAAyBJ,EAAKF,WAChEE,EAAKwD,iBAAkBpD,EAAAA,EAAAA,eAAc,gBAAiBJ,EAAKF,WAC3DE,EAAKyD,iBACLzD,EAAKqD,WAAW9C,iBAAiB,SAAS,kBAAMP,EAAK0D,cAAc,IAAE1D,CACzE,CAqGC,8JArGAS,CAAA2C,aAAA,EAAA1C,IAAA,SAAAC,MACD,SAAAmB,OAAOiB,GAOH,OANIA,IACAd,KAAKoB,WAAW1C,MAAQoC,EAAKY,OAAS,GACtC1B,KAAKqB,WAAW3C,MAAQoC,EAAKa,OAAS,IAE1C3B,KAAK4B,aACL5B,KAAKyB,eACEzB,KAAKnC,SAChB,GAAC,CAAAY,IAAA,mBAAAC,MACD,SAAAmD,iBAAiBC,GACb9B,KAAKnC,UAAUS,iBAAiB,SAAUwD,EAC9C,GAAC,CAAArD,IAAA,kBAAAC,MACD,SAAAqD,gBAAgBD,GAAS,IAAAjD,EAAA,KACrBmB,KAAKoB,WAAW9C,iBAAiB,SAAS,WACtCwD,EAAQjD,EAAKuC,WAAW1C,OACxBG,EAAK4C,cACT,GACJ,GAAC,CAAAhD,IAAA,kBAAAC,MACD,SAAAsD,gBAAgBF,GAAS,IAAA/B,EAAA,KACrBC,KAAKqB,WAAW/C,iBAAiB,SAAS,WACtCwD,EAAQ/B,EAAKsB,WAAW3C,OACxBqB,EAAK0B,cACT,GACJ,GAAC,CAAAhD,IAAA,gBAAAC,MACD,SAAAuD,cAAcP,GAEV,MADmB,6BACDQ,KAAKR,EAC3B,GAAC,CAAAjD,IAAA,gBAAAC,MACD,SAAAyD,cAAcR,GAEV,MADmB,wCACDO,KAAKP,EAC3B,GAAC,CAAAlD,IAAA,cAAAC,MACD,SAAA0D,YAAYT,GAER,IAAMU,EAAUV,EAAMW,QAAQ,MAAO,IAEjCC,EAAUF,EAKd,OAJIA,EAAQG,WAAW,OACnBD,EAAU,IAAMF,GAGG,IAAnBE,EAAQlC,OACD,GACPkC,EAAQlC,QAAU,EACX,KACPkC,EAAQlC,QAAU,EACX,OAAPb,OAAc+C,EAAQE,MAAM,EAAG,IAC/BF,EAAQlC,QAAU,EACX,OAAPb,OAAc+C,EAAQE,MAAM,EAAG,GAAE,MAAAjD,OAAK+C,EAAQE,MAAM,EAAG,IACvDF,EAAQlC,QAAU,EACX,OAAPb,OAAc+C,EAAQE,MAAM,EAAG,GAAE,MAAAjD,OAAK+C,EAAQE,MAAM,EAAG,GAAE,KAAAjD,OAAI+C,EAAQE,MAAM,EAAG,IAC3E,OAAPjD,OAAc+C,EAAQE,MAAM,EAAG,GAAE,MAAAjD,OAAK+C,EAAQE,MAAM,EAAG,GAAE,KAAAjD,OAAI+C,EAAQE,MAAM,EAAG,GAAE,KAAAjD,OAAI+C,EAAQE,MAAM,EAAG,IACzG,GAAC,CAAAhE,IAAA,iBAAAC,MACD,SAAA8C,iBAAiB,IAAAkB,EAAA,KACb1C,KAAKqB,WAAW/C,iBAAiB,SAAS,SAACqE,GACvC,IAAMC,EAAQD,EAAME,OACdC,EAAiBF,EAAMG,eACvBC,EAAYN,EAAKN,YAAYQ,EAAMlE,OACzCkE,EAAMlE,MAAQsE,EAEVF,GACAF,EAAMK,kBAAkBH,EAAgBA,GAE5CJ,EAAKjB,cACT,GACJ,GACA,CAAAhD,IAAA,eAAAC,MACA,SAAA+C,eACI,IAAMC,EAAQ1B,KAAKoB,WAAW1C,MAAMwE,OAC9BvB,EAAQ3B,KAAKqB,WAAW3C,MAAMwE,OAC9BC,EAAenD,KAAKiC,cAAcP,GAClC0B,EAAepD,KAAKmC,cAAcR,GAExC,GADA3B,KAAKsB,aAAad,WAAa2C,GAAgBC,GAC3C1B,EAAMrB,OAAS,GAAKsB,EAAMtB,OAAS,EACnC,GAAK8C,GAAiBC,EASlBpD,KAAK4B,iBAT2B,CAChC,IAAMyB,EAAS,IACVF,GAAgBzB,EAAMrB,OAAS,GAChCgD,EAAOC,KAAK,6BACXF,GAAgBzB,EAAMtB,OAAS,GAChCgD,EAAOC,KAAK,gDAChBtD,KAAKuD,WAAWF,EACpB,CAKR,GAAC,CAAA5E,IAAA,aAAAC,MACD,SAAA6E,WAAWF,GACPrD,KAAKuB,gBAAgBlC,YAAcgE,EAAOG,KAAK,MAC/CxD,KAAKuB,gBAAgBkC,MAAMC,QAAU,OACzC,GAAC,CAAAjF,IAAA,aAAAC,MACD,SAAAkD,aACI5B,KAAKuB,gBAAgBlC,YAAc,GACnCW,KAAKuB,gBAAgBkC,MAAMC,QAAU,MACzC,GAAC,CAAAjF,IAAA,YAAAC,MACD,SAAAiF,YACI,MAAO,CACHjC,MAAO1B,KAAKoB,WAAW1C,MAAMwE,OAC7BvB,MAAO3B,KAAKqB,WAAW3C,MAAMwE,OAErC,KAAC/B,YAAA,CA9GoB,0CAAST,6kECD3B,IAAMkD,EAAK,SAAAnG,iTAAAC,CAAAkG,MAAAnG,GAAA,IAAAE,EAAAC,aAAAgG,OACd,SAAAA,MAAY/F,GAAW,IAAAE,EAIiE,mHAJjEC,CAAA,KAAA4F,QACnB7F,EAAAJ,EAAAM,KAAA,KAAMJ,IACDgG,aAAc1F,EAAAA,EAAAA,eAAc,gBAAiBJ,EAAKF,WACvDE,EAAK8F,YAAYvF,iBAAiB,SAAS,kBAAMP,EAAK+F,OAAO,IAC7D/F,EAAKF,UAAUS,iBAAiB,SAAS,SAACqE,GAAK,OAAK5E,EAAKgG,mBAAmBpB,EAAM,IAAE5E,CACxF,CAiBC,8JAjBAS,CAAAoF,MAAA,EAAAnF,IAAA,OAAAC,MACD,SAAAsF,OACIhE,KAAKnC,UAAUyC,UAAUC,IAAI,eACjC,GAAC,CAAA9B,IAAA,QAAAC,MACD,SAAAoF,QACI9D,KAAKnC,UAAUyC,UAAUG,OAAO,eACpC,GAAC,CAAAhC,IAAA,aAAAC,MACD,SAAAuF,WAAWC,GACP,IAAMC,GAAehG,EAAAA,EAAAA,eAAc,kBAAmB6B,KAAKnC,WAG3D,OAFAsG,EAAalE,UAAY,GACzBkE,EAAa/D,YAAY8D,GAClBlE,IACX,GAAC,CAAAvB,IAAA,qBAAAC,MACD,SAAAqF,mBAAmBpB,GACXA,EAAME,SAAW7C,KAAKnC,WACtBmC,KAAK8D,OAEb,KAACF,KAAA,CAvBa,0CAASlD,qlECCpB,IAAM0D,EAAS,SAAA3G,iTAAAC,CAAA0G,UAAA3G,GAAA,IAAAE,EAAAC,aAAAwG,WAClB,SAAAA,UAAYvG,GAAW,IAAAE,EAKmD,mHALnDC,CAAA,KAAAoG,YACnBrG,EAAAJ,EAAAM,KAAA,KAAMJ,IACDwG,eAAiBtG,EAAKF,UAAUyG,iBAAiB,eACtDvG,EAAKwG,cAAepG,EAAAA,EAAAA,eAAc,wBAAyBJ,EAAKF,WAChEE,EAAKuD,cAAenD,EAAAA,EAAAA,eAAc,wBAAyBJ,EAAKF,WAChEE,EAAKwD,iBAAkBpD,EAAAA,EAAAA,eAAc,gBAAiBJ,EAAKF,WAAWE,CAC1E,CAsEC,8JAtEAS,CAAA4F,UAAA,EAAA3F,IAAA,SAAAC,MACD,SAAAmB,OAAOiB,GAWH,OAVIA,IACAd,KAAKuE,aAAa7F,MAAQoC,EAAK0D,SAAW,GAE1CxE,KAAKqE,eAAenE,SAAQ,SAAAuE,GACxB,IAAMC,EAAWD,EAAOE,OAAS7D,EAAK8D,UACtCH,EAAOnE,UAAUuE,OAAO,gBAAiBH,EAC7C,KAEJ1E,KAAK4B,aACL5B,KAAKyB,eACEzB,KAAKnC,SAChB,GAAC,CAAAY,IAAA,mBAAAC,MACD,SAAAmD,iBAAiBC,GACb9B,KAAKnC,UAAUS,iBAAiB,SAAUwD,EAC9C,GAAC,CAAArD,IAAA,oBAAAC,MACD,SAAAoG,kBAAkBhD,GAAS,IAAAjD,EAAA,KACvBmB,KAAKqE,eAAenE,SAAQ,SAAAuE,GACxBA,EAAOnG,iBAAiB,SAAS,WAC7BO,EAAKwF,eAAenE,SAAQ,SAAA6E,GACxBA,EAAIzE,UAAUG,OAAO,iBACrBsE,EAAIzE,UAAUG,OAAO,oBACzB,IACAgE,EAAOnE,UAAUC,IAAI,iBACrBkE,EAAOnE,UAAUC,IAAI,qBACrBuB,EAAQ2C,EAAOE,MACf9F,EAAK4C,cACT,GACJ,GACJ,GAAC,CAAAhD,IAAA,oBAAAC,MACD,SAAAsG,kBAAkBlD,GAAS,IAAA/B,EAAA,KACvBC,KAAKuE,aAAajG,iBAAiB,SAAS,WACxCwD,EAAQ/B,EAAKwE,aAAa7F,OAC1BqB,EAAK0B,cACT,GACJ,GAAC,CAAAhD,IAAA,eAAAC,MACD,SAAA+C,eACI,IAAMwD,EAAiBjF,KAAKuE,aAAa7F,MAAMwE,OAAO7C,OAAS,EACzD6E,EAAoBC,MAAMC,KAAKpF,KAAKqE,gBAAgBgB,MAAK,SAAAN,GAAG,OAAIA,EAAIzE,UAAUgF,SAAS,gBAAgB,IAE7G,GADAtF,KAAKsB,aAAad,WAAayE,GAAkBC,GAC7ClF,KAAKuE,aAAa7F,MAAM2B,OAAS,GAAK6E,EACtC,GAAKD,GAAmBC,EASpBlF,KAAK4B,iBATkC,CACvC,IAAMyB,EAAS,GACV4B,GACD5B,EAAOC,KAAK,0BACX4B,GACD7B,EAAOC,KAAK,0BAChBtD,KAAKuD,WAAWF,EACpB,CAKR,GAAC,CAAA5E,IAAA,aAAAC,MACD,SAAA6E,WAAWF,GACPrD,KAAKuB,gBAAgBlC,YAAcgE,EAAOG,KAAK,MAC/CxD,KAAKuB,gBAAgBkC,MAAMC,QAAU,OACzC,GAAC,CAAAjF,IAAA,aAAAC,MACD,SAAAkD,aACI5B,KAAKuB,gBAAgBlC,YAAc,GACnCW,KAAKuB,gBAAgBkC,MAAMC,QAAU,MACzC,GAAC,CAAAjF,IAAA,YAAAC,MACD,SAAAiF,YACI,IAAI4B,EAEJ,MAAO,CACHX,UAFoH,QAA/FW,EAAKJ,MAAMC,KAAKpF,KAAKqE,gBAAgBmB,MAAK,SAAAT,GAAG,OAAIA,EAAIzE,UAAUgF,SAAS,gBAAgB,WAAsB,IAAPC,OAAgB,EAASA,EAAGZ,KAGxJH,QAASxE,KAAKuE,aAAa7F,MAAMwE,OAEzC,KAACkB,SAAA,CA7EiB,0CAAS1D,ioECAxB,IAAM+E,EAAc,SAAAhI,iTAAAC,CAAA+H,eAAAhI,GAAA,IAAAE,EAAAC,aAAA6H,gBACvB,SAAAA,eAAY5H,GAAW,IAAAE,EAO0C,mHAP1CC,CAAA,KAAAyH,iBACnB1H,EAAAJ,EAAAM,KAAA,KAAMJ,IACD0B,OAAQpB,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK2H,aAAcvH,EAAAA,EAAAA,eAAc,cAAeJ,EAAKF,WACrDE,EAAK0B,OAAQtB,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK6C,OAAQzC,EAAAA,EAAAA,eAAc,eAAgBJ,EAAKF,WAChDE,EAAK8C,UAAW1C,EAAAA,EAAAA,eAAc,kBAAmBJ,EAAKF,WACtDE,EAAK0G,QAAStG,EAAAA,EAAAA,eAAc,gBAAiBJ,EAAKF,WAAWE,CACjE,CA0BC,8JA1BAS,CAAAiH,eAAA,EAAAhH,IAAA,SAAAC,MACD,SAAAmB,OAAOP,GACHU,KAAKT,MAAMF,YAAcC,EAAQC,MACjCS,KAAK0F,YAAYrG,YAAcC,EAAQoG,YACvC1F,KAAKY,MAAMG,IAAMzB,EAAQsB,MAEH,OAAlBtB,EAAQG,OACRO,KAAKP,MAAMJ,YAAc,WACzBW,KAAKyE,OAAOpF,YAAc,aAC1BW,KAAKyE,OAAOjE,UAAW,EACvBR,KAAKyE,OAAOnE,UAAUC,IAAI,sBAG1BP,KAAKP,MAAMJ,YAAc,GAAHG,OAAMF,EAAQG,MAAK,aACzCO,KAAKyE,OAAOpF,YAAc,YAC1BW,KAAKyE,OAAOjE,UAAW,EACvBR,KAAKyE,OAAOnE,UAAUG,OAAO,qBAGjCT,KAAKa,SAASxB,YAAcC,EAAQuB,SACpC,IAAMG,EAAkBC,EAAAA,YAAY3B,EAAQuB,WAAa,QAEzD,OADAb,KAAKa,SAASK,UAAY,iCAAH1B,OAAoCwB,GACpDhB,KAAKnC,SAChB,GAAC,CAAAY,IAAA,mBAAAC,MACD,SAAAiH,iBAAiB7D,GACb9B,KAAKyE,OAAOnG,iBAAiB,QAASwD,EAC1C,KAAC2D,cAAA,CAnCsB,0CAAS/E,61BCH7B,IAAMkF,EAAG,WACZ,SAAAA,IAAYC,GAAuB,IAC3BN,EADaO,EAAOC,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,+GAAC/H,CAAA,KAAA4H,KAE7B5F,KAAK6F,QAAUA,EACf7F,KAAK8F,QAAU,CACXG,QAASC,OAAOC,OAAO,CAAE,eAAgB,oBAAkD,QAA1BZ,EAAKO,EAAQG,eAA4B,IAAPV,EAAgBA,EAAK,CAAC,GAEjI,CAaC,8JAbA/G,CAAAoH,IAAA,EAAAnH,IAAA,iBAAAC,MACD,SAAA0H,eAAeC,GACX,OAAIA,EAASC,GACFD,EAASE,OAETF,EAASE,OACXC,MAAK,SAAA1F,GAAU,IAAIyE,EAAI,OAAOkB,QAAQC,OAA6B,QAArBnB,EAAKzE,EAAK6F,aAA0B,IAAPpB,EAAgBA,EAAKc,EAASO,WAAa,GACnI,GAAC,CAAAnI,IAAA,MAAAC,MACD,SAAAmI,IAAIC,GACA,OAAOC,MAAM/G,KAAK6F,QAAUiB,EAAKZ,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGnG,KAAK8F,SAAU,CAAEkB,OAAQ,SAAUR,KAAKxG,KAAKoG,eAClH,GAAC,CAAA3H,IAAA,OAAAC,MACD,SAAAuI,KAAKH,EAAKhG,GAAuB,IAAjBkG,EAAMjB,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAAG,OACrB,OAAOgB,MAAM/G,KAAK6F,QAAUiB,EAAKZ,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGnG,KAAK8F,SAAU,CAAEkB,OAAAA,EAAQE,KAAMC,KAAKC,UAAUtG,MAAU0F,KAAKxG,KAAKoG,eACvI,KAACR,GAAA,CApBW,k2BCAT,IAAMlF,EAAS,WAClB,SAAAA,UAAY7C,gHAAWG,CAAA,KAAA0C,WACnBV,KAAKnC,UAAYA,CACrB,CAuBC,8JAvBAW,CAAAkC,UAAA,EAAAjC,IAAA,UAAAC,MACD,SAAA2I,QAAQC,EAASC,GACbD,EAAQjI,YAAckI,CAC1B,GAAC,CAAA9I,IAAA,WAAAC,MACD,SAAA8I,SAASF,EAASvG,EAAK0G,GACnBH,EAAQvG,IAAMA,EACduG,EAAQG,IAAMA,CAClB,GAAC,CAAAhJ,IAAA,cAAAC,MACD,SAAAgJ,YAAYJ,EAASK,GACbA,EACAL,EAAQM,aAAa,WAAY,QAGjCN,EAAQO,gBAAgB,WAEhC,GAAC,CAAApJ,IAAA,cAAAC,MACD,SAAAoJ,YAAYR,EAASpG,EAAWyG,GACxBA,EACAL,EAAQhH,UAAUC,IAAIW,GAGtBoG,EAAQhH,UAAUG,OAAOS,EAEjC,KAACR,SAAA,CA1BiB,i2BCKf,IAAMqH,EAAY,WACrB,SAAAA,4HAAc/J,CAAA,KAAA+J,cACV/H,KAAKgI,QAAU,IAAIC,GACvB,CAyDC,8JAxDDzJ,CAAAuJ,aAAA,EAAAtJ,IAAA,KAAAC,MAGA,SAAAwJ,GAAGC,EAAWC,GACV,IAAI7C,EACCvF,KAAKgI,QAAQK,IAAIF,IAClBnI,KAAKgI,QAAQM,IAAIH,EAAW,IAAII,KAEG,QAAtChD,EAAKvF,KAAKgI,QAAQnB,IAAIsB,UAA+B,IAAP5C,GAAyBA,EAAGhF,IAAI6H,EACnF,GACA,CAAA3J,IAAA,MAAAC,MAGA,SAAA8J,IAAIL,EAAWC,GACX,IAAI7C,EACAvF,KAAKgI,QAAQK,IAAIF,KACjBnI,KAAKgI,QAAQnB,IAAIsB,GAAU,OAAQC,GACuD,KAA9C,QAAtC7C,EAAKvF,KAAKgI,QAAQnB,IAAIsB,UAA+B,IAAP5C,OAAgB,EAASA,EAAGkD,OAC5EzI,KAAKgI,QAAO,OAAQG,GAGhC,GACA,CAAA1J,IAAA,OAAAC,MAGA,SAAAH,KAAK4J,EAAWrH,GACZd,KAAKgI,QAAQ9H,SAAQ,SAACwI,EAAa/D,GAClB,MAATA,GACA+D,EAAYxI,SAAQ,SAAAkI,GAAQ,OAAIA,EAAS,CACrCD,UAAAA,EACArH,KAAAA,GACF,KACF6D,aAAgBgE,QAAUhE,EAAKzC,KAAKiG,IAAcxD,IAASwD,IAC3DO,EAAYxI,SAAQ,SAAAkI,GAAQ,OAAIA,EAAStH,EAAK,GAEtD,GACJ,GACA,CAAArC,IAAA,QAAAC,MAGA,SAAAkK,MAAMR,GACFpI,KAAKkI,GAAG,IAAKE,EACjB,GACA,CAAA3J,IAAA,SAAAC,MAGA,SAAAmK,SACI7I,KAAKgI,QAAU,IAAIC,GACvB,GACA,CAAAxJ,IAAA,UAAAC,MAGA,SAAAoK,QAAQX,EAAWY,GAAS,IAAAhL,EAAA,KACxB,OAAO,WAAgB,IAAf4E,EAAKoD,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACbhI,EAAKQ,KAAK4J,EAAWjC,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAIxD,GAAS,CAAC,GAAMoG,GAAW,CAAC,GACtF,CACJ,KAAChB,YAAA,CA5DoB,6ECLlB,IAAM9G,EAAc,CACvB,YAAa,OACb,OAAU,QACV,eAAkB,aAClB,OAAU,SACV,YAAa,yGCLV,IAAM+H,EAAU,GAAHxJ,OAAMyJ,qCAAsB,iBACnCC,EAAU,GAAH1J,OAAMyJ,qCAAsB,qBACnCE,EAAW,CAAC,iuCCFlB,SAASC,cAAc1K,GAC1B,OAAOA,EAAM4D,QAAQ,qBAAsB,SAAS+G,aACxD,CACO,SAASC,WAAWC,GACvB,MAAqB,iBAANA,GAAmBA,EAAElJ,OAAS,CACjD,CACO,SAASmJ,QAAQ9K,GACpB,OAAOA,OACX,CACO,SAAS+K,kBAAkBC,GAAqC,IAApBX,EAAOhD,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAAG4D,SACzD,GAAIL,WAAWI,GACX,OAAOvE,MAAMC,KAAK2D,EAAQzE,iBAAiBoF,IAE/C,GAAIA,aAA2BE,SAC3B,OAAOzE,MAAMC,KAAKsE,GAEtB,GAAIvE,MAAM0E,QAAQH,GACd,OAAOA,EAEX,MAAM,IAAII,MAAM,2BACpB,CACO,SAAS3L,cAAcuL,EAAiBX,GAC3C,GAAIO,WAAWI,GAAkB,CAC7B,IAAMK,EAAWN,kBAAkBC,EAAiBX,GAIpD,GAHIgB,EAAS1J,OAAS,GAClB2J,QAAQC,KAAK,YAADzK,OAAakK,EAAe,kCAEpB,IAApBK,EAAS1J,OACT,MAAM,IAAIyJ,MAAM,YAADtK,OAAakK,EAAe,oBAE/C,OAAOK,EAASG,KACpB,CACA,GAAIR,aAA2BS,YAC3B,OAAOT,EAEX,MAAM,IAAII,MAAM,2BACpB,CACO,SAAS9K,cAAcoL,GAE1B,OADiBjM,cAAciM,GACflG,QAAQmG,kBAAkBC,WAAU,EACxD,CACO,SAASC,IAAIC,EAAOlD,EAASmD,GAChC,IAAI9F,EAAO6F,EAKX,OAJIlD,IACA3C,GAAQ,KAAJnF,OAAS8H,IACbmD,IACA9F,GAAQ,IAAJnF,OAAQiL,IACT,CACH9F,KAAAA,EACA+F,MAAA,IAAAlL,OAAWmF,GAEnB,CACO,SAASgG,oBAAoBC,EAAKC,GACrC,OAAO3E,OAAO4E,QAAQ5E,OAAO6E,0BAA0B7E,OAAO8E,eAAeJ,KACxEC,QAAO,SAAAI,GAAA,IAAAC,EAAAC,eAAAF,EAAA,GAAEtG,EAAIuG,EAAA,GAAEE,EAAIF,EAAA,UAAML,EAASA,EAAOlG,EAAMyG,GAAkB,gBAATzG,CAAuB,IAC/E0G,KAAI,SAAAC,GAAA,IAAAC,EAAAJ,eAAAG,EAAA,GAAE3G,EAAI4G,EAAA,GAAMA,EAAA,UAAM5G,CAAI,GACnC,CAIO,SAAS6G,eAAeC,EAAI3K,GAC/B,IAAK,IAAMrC,KAAOqC,EACd2K,EAAGC,QAAQjN,GAAOkN,OAAO7K,EAAKrC,GAEtC,CAIO,SAASmN,eAAeH,EAAII,GAC/B,IAAM/K,EAAO,CAAC,EACd,IAAK,IAAMrC,KAAOgN,EAAGC,QACjB5K,EAAKrC,GAAOoN,EAAOpN,GAAKgN,EAAGC,QAAQjN,IAEvC,OAAOqC,CACX,CAIO,SAASgL,cAAclB,GAC1B,IAAMmB,EAAY7F,OAAO8E,eAAeJ,GACxC,OAAOmB,IAAc7F,OAAO8E,eAAe,CAAC,IAC1B,OAAde,CACR,CACO,SAASC,UAAUC,GACtB,MAAoB,kBAANA,CAClB,CAMO,SAASC,cAAcC,EAASC,EAAOC,GAC1C,IAAM/E,EAAUqC,SAASuC,cAAcC,GACvC,GAAIC,EACA,IAAK,IAAM3N,KAAO2N,EAAO,CACrB,IAAM1N,EAAQ0N,EAAM3N,GAChBqN,cAAcpN,IAAkB,YAARD,EACxB+M,eAAelE,EAAS5I,GAIxB4I,EAAQ7I,GAAOuN,UAAUtN,GAASA,EAAQiN,OAAOjN,EAEzD,CAEJ,GAAI2N,EAAU,KACyDC,EADzDC,qsBAAAC,CACUrH,MAAM0E,QAAQwC,GAAYA,EAAW,CAACA,IAAS,IAAnE,IAAAE,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAAqE,KAA1DC,EAAKN,EAAA5N,MACZ4I,EAAQuF,OAAOD,EACnB,CAAC,OAAAE,GAAAP,EAAAQ,EAAAD,EAAA,SAAAP,EAAAS,GAAA,CACL,CACA,OAAO1F,CACX,wcC9GI2F,EAA2B,CAAC,EAGhC,SAASC,oBAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBnH,IAAjBoH,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUG,EAAQA,EAAOD,QAASH,qBAG/CI,EAAOD,OACf,CCrBAH,oBAAoBM,EAAI,CAACH,EAASI,KACjC,IAAI,IAAIhP,KAAOgP,EACXP,oBAAoBQ,EAAED,EAAYhP,KAASyO,oBAAoBQ,EAAEL,EAAS5O,IAC5EyH,OAAOyH,eAAeN,EAAS5O,EAAK,CAAEmP,YAAY,EAAM/G,IAAK4G,EAAWhP,IAE1E,ECNDyO,oBAAoBQ,EAAI,CAAC9C,EAAKQ,IAAUlF,OAAO6F,UAAU8B,eAAe5P,KAAK2M,EAAKQ,GCClF8B,oBAAoBY,EAAKT,IACH,oBAAXU,QAA0BA,OAAOC,aAC1C9H,OAAOyH,eAAeN,EAASU,OAAOC,YAAa,CAAEtP,MAAO,WAE7DwH,OAAOyH,eAAeN,EAAS,aAAc,CAAE3O,OAAO,GAAO,mnBCMxDZ,EAAS,IAAIiK,EAAAA,aACbkG,EAAM,IAAIrI,EAAAA,IAAIoD,EAAAA,SAChBkF,EAAU,GACVC,EAAc,GACZC,GAAajQ,EAAAA,EAAAA,eAAc,WAC3BkQ,GAAUlQ,EAAAA,EAAAA,eAAc,YACxBmQ,GAAS7E,EAAAA,EAAAA,mBAAkB,UAC3B8E,GAAepQ,EAAAA,EAAAA,eAAc,mBAC/BqQ,GAAgBrQ,EAAAA,EAAAA,eAAc,2BAC5BsQ,EAAe,IAAI7K,EAAAA,MAAM0K,EAAO,IAChCI,EAAc,IAAI9K,EAAAA,MAAM0K,EAAO,IAC/BK,EAAa,IAAI/K,EAAAA,MAAM0K,EAAO,IAC9BM,EAAS,IAAIpR,EAAAA,OAAO4Q,EAAYtQ,GACtCmQ,EAAIpH,IAAI,YAAYL,MAAK,SAAC1F,GACtBkJ,QAAQ6E,IAAI,YAAa/N,EAAKhB,MAAM,KACpCoO,EAAUpN,EAAKhB,MAAMuL,KAAI,SAACzM,GAAI,OAAMsH,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGvH,GAAO,CAAEgC,MAAOsI,EAAAA,QAAUtK,EAAKgC,OAAQ,KACnGV,SAAQ,SAAAZ,GACZ,IAAMR,GAAWX,EAAAA,EAAAA,eAAc,iBACzB2Q,GAAc9P,EAAAA,EAAAA,eAAcF,GACrB,IAAI6B,EAAAA,KAAKmO,EAAahR,GAC9B+B,OAAOP,GACZ+O,EAAQjO,YAAY0O,EACxB,GACJ,IACAhR,EAAOoK,GAAG,cAAc,SAACpH,GACrB,IAAMxB,EAAU4O,EAAQ1I,MAAK,SAAAuJ,GAAC,OAAIA,EAAEnP,KAAOkB,EAAKnB,SAAS,IACzD,GAAIL,EAAS,CACT,IAAMR,GAAWX,EAAAA,EAAAA,eAAc,iBACzB6Q,GAAiBhQ,EAAAA,EAAAA,eAAcF,GAC/BmQ,EAAU,IAAIxJ,EAAAA,eAAeuJ,GACnCC,EAAQpP,OAAOP,GACf2P,EAAQtJ,kBAAiB,WACrB7H,EAAOS,KAAK,aAAc,CAAEoB,UAAWL,EAAQM,IACnD,IACA6O,EAAaxK,WAAW+K,GAAgBhL,MAC5C,CACJ,IACAlG,EAAOoK,GAAG,cAAc,SAACpH,GACrB,IAAMxB,EAAU4O,EAAQ1I,MAAK,SAAAuJ,GAAC,OAAIA,EAAEnP,KAAOkB,EAAKnB,SAAS,IACzD,GAAIL,EAAS,CACT6O,EAAY7K,KAAK,CACbhE,QAASA,EACTI,MAAOyO,EAAY9N,OAAS,IAEhC,IAAM6O,EAAQf,EAAYgB,QAAO,SAACC,EAAKxQ,GAAI,OAAKwQ,EAAMxQ,EAAKU,QAAQG,KAAK,GAAE,GAC1EmP,EAAO/O,OAAOsO,EAAae,GAC3BV,EAAcnP,YAAc,GAAHG,OAAM2O,EAAY9N,QAC3CoO,EAAa3K,OACjB,CACJ,IACAhG,EAAOoK,GAAG,iBAAiB,SAACpH,GAExB,IAAMoO,GADNf,EAAcA,EAAYtD,QAAO,SAAAjM,GAAI,OAAIA,EAAKU,QAAQM,KAAOkB,EAAKnB,SAAS,KACjDwP,QAAO,SAACC,EAAKxQ,GAAI,OAAKwQ,EAAMxQ,EAAKU,QAAQG,KAAK,GAAE,GAC1EmP,EAAO/O,OAAOsO,EAAae,GAC3BV,EAAcnP,YAAc,GAAHG,OAAM2O,EAAY9N,OAC/C,IACAvC,EAAOoK,GAAG,cAAc,WACpB,IAAMpJ,GAAWX,EAAAA,EAAAA,eAAc,UACzBkR,GAAerQ,EAAAA,EAAAA,eAAcF,GAC7BwQ,EAAY,IAAIlL,EAAAA,UAAUiL,GAChCC,EAAUzP,SACVyP,EAAUxK,mBAAkB,SAACF,GACzBoF,QAAQ6E,IAAI,kBAAmBjK,EACnC,IACA0K,EAAUtK,mBAAkB,SAACR,GACzBwF,QAAQ6E,IAAI,WAAYrK,EAC5B,IACA8K,EAAUzN,kBAAiB,SAACc,GACxBA,EAAM4M,iBACN,IAAMC,EAAcF,EAAU3L,YAC9BqG,QAAQ6E,IAAI,cAAeW,GAE3B,IAAMC,GAAmBtR,EAAAA,EAAAA,eAAc,aACjCuR,GAAkB1Q,EAAAA,EAAAA,eAAcyQ,GAChCE,EAAe,IAAIxO,EAAAA,aAAauO,GACtCC,EAAa9P,SACb8P,EAAa9N,kBAAiB,SAACc,GAC3BA,EAAM4M,iBACN,IAAMK,EAAiBD,EAAahM,YACpCqG,QAAQ6E,IAAI,cAAe3I,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGqJ,GAAcI,GAE7E,IACAjB,EAAW1K,WAAWyL,EAC1B,IACAf,EAAW1K,WAAWoL,GAAcrL,OACpC0K,EAAY5K,OAChB,IAEAyK,EAAajQ,iBAAiB,SAAS,WACnC,IAAM4Q,EAAQf,EAAYgB,QAAO,SAACC,EAAKxQ,GAAI,OAAKwQ,EAAMxQ,EAAKU,QAAQG,KAAK,GAAE,GAC1EmP,EAAO/O,OAAOsO,EAAae,GAC3BR,EAAYzK,WAAWmK,GAAYpK,MACvC","sources":["webpack://my-webpack-project/./src/components/Basket.ts","webpack://my-webpack-project/./src/components/Card.ts","webpack://my-webpack-project/./src/components/ContactsForm.ts","webpack://my-webpack-project/./src/components/Modal.ts","webpack://my-webpack-project/./src/components/OrderForm.ts","webpack://my-webpack-project/./src/components/ProductPreview.ts","webpack://my-webpack-project/./src/components/base/api.ts","webpack://my-webpack-project/./src/components/base/components.ts","webpack://my-webpack-project/./src/components/base/events.ts","webpack://my-webpack-project/./src/utils/categoryMap.ts","webpack://my-webpack-project/./src/utils/constants.ts","webpack://my-webpack-project/./src/utils/utils.ts","webpack://my-webpack-project/webpack/bootstrap","webpack://my-webpack-project/webpack/runtime/define property getters","webpack://my-webpack-project/webpack/runtime/hasOwnProperty shorthand","webpack://my-webpack-project/webpack/runtime/make namespace object","webpack://my-webpack-project/./src/index.ts"],"sourcesContent":["import { cloneTemplate, ensureElement } from \"../utils/utils\";\nimport { Component } from \"./base/components\";\nexport class Basket extends Component {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this.itemlist = ensureElement('.basket__list', this.container);\n        this.totalprice = ensureElement('.basket__price', this.container);\n        this.orderbutton = ensureElement('.button', this.container);\n        this.orderbutton.addEventListener('click', () => {\n            this.events.emit('order:open');\n        });\n    }\n    createBasketItem(item) {\n        const template = ensureElement('#card-basket');\n        const basketitem = cloneTemplate(template);\n        const basketitemtitle = ensureElement('.card__title', basketitem);\n        const basketitemprice = ensureElement('.card__price', basketitem);\n        const basketitembutton = ensureElement('.basket__item-delete', basketitem);\n        const basketitemindex = ensureElement('.basket__item-index', basketitem);\n        basketitemtitle.textContent = item.product.title;\n        basketitemprice.textContent = `${item.product.price} синапсов`;\n        basketitemindex.textContent = `${item.index}`;\n        basketitembutton.addEventListener('click', () => {\n            this.events.emit('basket:remove', { productId: item.product.id });\n        });\n        return basketitem;\n    }\n    render(items, totalprice) {\n        this.itemlist.innerHTML = '';\n        items.forEach(item => {\n            const itemElement = this.createBasketItem(item);\n            this.itemlist.appendChild(itemElement);\n        });\n        this.totalprice.textContent = `${totalprice} синапсов`;\n        if (items.length === 0) {\n            this.orderbutton.classList.add('button__disabled');\n            this.orderbutton.disabled = true;\n        }\n        else {\n            this.orderbutton.classList.remove('button__disabled');\n            this.orderbutton.disabled = false;\n        }\n    }\n}\n","import { Component } from \"./base/components\";\nimport { ensureElement } from \"../utils/utils\";\nimport { categoryMap } from \"../utils/categoryMap\";\nexport class Card extends Component {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this.title = ensureElement('.card__title', this.container);\n        this.price = ensureElement('.card__price', this.container);\n        this.image = ensureElement('.card__image', this.container);\n        this.category = ensureElement('.card__category', this.container);\n    }\n    render(data) {\n        this.title.textContent = data.title;\n        if (data.price === null) {\n            this.price.textContent = 'Бесценно';\n        }\n        else {\n            this.price.textContent = `${data.price} синапсов`;\n        }\n        this.image.src = data.image;\n        this.category.textContent = data.category;\n        const englishCategory = categoryMap[data.category] || 'other';\n        this.category.className = `card__category card__category_${englishCategory}`;\n        this.container.addEventListener('click', () => {\n            this.events.emit('card:click', { productId: data.id });\n        });\n    }\n}\n","// components/ContactsForm.ts\nimport { ensureElement } from \"../utils/utils\";\nimport { Component } from \"./base/components\";\nexport class ContactsForm extends Component {\n    constructor(container) {\n        super(container);\n        this.emailInput = ensureElement('input[name=\"email\"]', this.container);\n        this.phoneInput = ensureElement('input[name=\"phone\"]', this.container);\n        this.submitButton = ensureElement('button[type=\"submit\"]', this.container);\n        this.errorsContainer = ensureElement('.form__errors', this.container);\n        this.setupPhoneMask();\n        this.emailInput.addEventListener('input', () => this.validateForm());\n    }\n    render(data) {\n        if (data) {\n            this.emailInput.value = data.email || '';\n            this.phoneInput.value = data.phone || '';\n        }\n        this.hideErrors();\n        this.validateForm();\n        return this.container;\n    }\n    setSubmitHandler(handler) {\n        this.container.addEventListener('submit', handler);\n    }\n    setEmailHandler(handler) {\n        this.emailInput.addEventListener('input', () => {\n            handler(this.emailInput.value);\n            this.validateForm();\n        });\n    }\n    setPhoneHandler(handler) {\n        this.phoneInput.addEventListener('input', () => {\n            handler(this.phoneInput.value);\n            this.validateForm();\n        });\n    }\n    validateEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n    validatePhone(phone) {\n        const phoneRegex = /^\\+7\\s?\\(\\d{3}\\)\\s?\\d{3}-\\d{2}-\\d{2}$/;\n        return phoneRegex.test(phone);\n    }\n    formatPhone(phone) {\n        // Убираем все нецифры\n        const cleaned = phone.replace(/\\D/g, '');\n        // Если ввод начинается с 9, добавляем +7\n        let numbers = cleaned;\n        if (cleaned.startsWith('9')) {\n            numbers = '7' + cleaned; // преобразуем 9... в 79...\n        }\n        // Форматируем по шаблону +7 (XXX) XXX-XX-XX\n        if (numbers.length === 0)\n            return '';\n        if (numbers.length <= 1)\n            return '+7';\n        if (numbers.length <= 4)\n            return `+7 (${numbers.slice(1, 4)}`;\n        if (numbers.length <= 7)\n            return `+7 (${numbers.slice(1, 4)}) ${numbers.slice(4, 7)}`;\n        if (numbers.length <= 9)\n            return `+7 (${numbers.slice(1, 4)}) ${numbers.slice(4, 7)}-${numbers.slice(7, 9)}`;\n        return `+7 (${numbers.slice(1, 4)}) ${numbers.slice(4, 7)}-${numbers.slice(7, 9)}-${numbers.slice(9, 11)}`;\n    }\n    setupPhoneMask() {\n        this.phoneInput.addEventListener('input', (event) => {\n            const input = event.target;\n            const cursorPosition = input.selectionStart;\n            const formatted = this.formatPhone(input.value);\n            input.value = formatted;\n            // Восстанавливаем позицию курсора\n            if (cursorPosition) {\n                input.setSelectionRange(cursorPosition, cursorPosition);\n            }\n            this.validateForm();\n        });\n    }\n    // В конструкторе вызови:\n    validateForm() {\n        const email = this.emailInput.value.trim();\n        const phone = this.phoneInput.value.trim();\n        const isEmailValid = this.validateEmail(email);\n        const isPhoneValid = this.validatePhone(phone);\n        this.submitButton.disabled = !(isEmailValid && isPhoneValid);\n        if (email.length > 0 || phone.length > 0) {\n            if (!isEmailValid || !isPhoneValid) {\n                const errors = [];\n                if (!isEmailValid && email.length > 0)\n                    errors.push('Введите корректный email');\n                if (!isPhoneValid && phone.length > 0)\n                    errors.push('Введите телефон в формате +7 (XXX) XXX-XX-XX');\n                this.showErrors(errors);\n            }\n            else {\n                this.hideErrors();\n            }\n        }\n    }\n    showErrors(errors) {\n        this.errorsContainer.textContent = errors.join(', ');\n        this.errorsContainer.style.display = 'block';\n    }\n    hideErrors() {\n        this.errorsContainer.textContent = '';\n        this.errorsContainer.style.display = 'none';\n    }\n    getValues() {\n        return {\n            email: this.emailInput.value.trim(),\n            phone: this.phoneInput.value.trim()\n        };\n    }\n}\n","import { ensureElement } from \"../utils/utils\";\nimport { Component } from \"./base/components\";\nexport class Modal extends Component {\n    constructor(container) {\n        super(container);\n        this.closeButton = ensureElement('.modal__close', this.container);\n        this.closeButton.addEventListener('click', () => this.close());\n        this.container.addEventListener('click', (event) => this.handleOutsideClick(event));\n    }\n    open() {\n        this.container.classList.add('modal_active');\n    }\n    close() {\n        this.container.classList.remove('modal_active');\n    }\n    setContent(content) {\n        const modalContent = ensureElement('.modal__content', this.container);\n        modalContent.innerHTML = '';\n        modalContent.appendChild(content);\n        return this;\n    }\n    handleOutsideClick(event) {\n        if (event.target === this.container) {\n            this.close();\n        }\n    }\n}\n","// components/OrderForm.ts\nimport { ensureElement } from \"../utils/utils\";\nimport { Component } from \"./base/components\";\nexport class OrderForm extends Component {\n    constructor(container) {\n        super(container);\n        this.paymentButtons = this.container.querySelectorAll('.button_alt');\n        this.addressInput = ensureElement('input[name=\"address\"]', this.container);\n        this.submitButton = ensureElement('button[type=\"submit\"]', this.container);\n        this.errorsContainer = ensureElement('.form__errors', this.container);\n    }\n    render(data) {\n        if (data) {\n            this.addressInput.value = data.address || '';\n            // Установка выбранного способа оплаты\n            this.paymentButtons.forEach(button => {\n                const isActive = button.name === data.paymethod;\n                button.classList.toggle('button_active', isActive);\n            });\n        }\n        this.hideErrors();\n        this.validateForm();\n        return this.container;\n    }\n    setSubmitHandler(handler) {\n        this.container.addEventListener('submit', handler);\n    }\n    setPaymentHandler(handler) {\n        this.paymentButtons.forEach(button => {\n            button.addEventListener('click', () => {\n                this.paymentButtons.forEach(btn => {\n                    btn.classList.remove('button_active');\n                    btn.classList.remove('button_alt-active');\n                });\n                button.classList.add('button_active');\n                button.classList.add('button_alt-active');\n                handler(button.name);\n                this.validateForm();\n            });\n        });\n    }\n    setAddressHandler(handler) {\n        this.addressInput.addEventListener('input', () => {\n            handler(this.addressInput.value);\n            this.validateForm();\n        });\n    }\n    validateForm() {\n        const isAddressValid = this.addressInput.value.trim().length > 0;\n        const isPaymentSelected = Array.from(this.paymentButtons).some(btn => btn.classList.contains('button_active'));\n        this.submitButton.disabled = !(isAddressValid && isPaymentSelected);\n        if (this.addressInput.value.length > 0 || isPaymentSelected) {\n            if (!isAddressValid || !isPaymentSelected) {\n                const errors = [];\n                if (!isAddressValid)\n                    errors.push('Введите адрес доставки');\n                if (!isPaymentSelected)\n                    errors.push('Выберите способ оплаты');\n                this.showErrors(errors);\n            }\n            else {\n                this.hideErrors();\n            }\n        }\n    }\n    showErrors(errors) {\n        this.errorsContainer.textContent = errors.join(', ');\n        this.errorsContainer.style.display = 'block';\n    }\n    hideErrors() {\n        this.errorsContainer.textContent = '';\n        this.errorsContainer.style.display = 'none';\n    }\n    getValues() {\n        var _a;\n        const selectedPayment = (_a = Array.from(this.paymentButtons).find(btn => btn.classList.contains('button_active'))) === null || _a === void 0 ? void 0 : _a.name;\n        return {\n            paymethod: selectedPayment,\n            address: this.addressInput.value.trim()\n        };\n    }\n}\n","import { categoryMap } from \"../utils/categoryMap\";\nimport { ensureElement } from \"../utils/utils\";\nimport { Component } from \"./base/components\";\nexport class ProductPreview extends Component {\n    constructor(container) {\n        super(container);\n        this.title = ensureElement('.card__title', this.container);\n        this.description = ensureElement('.card__text', this.container);\n        this.price = ensureElement('.card__price', this.container);\n        this.image = ensureElement('.card__image', this.container);\n        this.category = ensureElement('.card__category', this.container);\n        this.button = ensureElement('.card__button', this.container);\n    }\n    render(product) {\n        this.title.textContent = product.title;\n        this.description.textContent = product.description;\n        this.image.src = product.image;\n        // Цена и кнопка\n        if (product.price === null) {\n            this.price.textContent = 'Бесценно';\n            this.button.textContent = 'Недоступно';\n            this.button.disabled = true;\n            this.button.classList.add('button__disabled');\n        }\n        else {\n            this.price.textContent = `${product.price} синапсов`;\n            this.button.textContent = 'В корзину';\n            this.button.disabled = false;\n            this.button.classList.remove('button__disabled');\n        }\n        // Категория\n        this.category.textContent = product.category;\n        const englishCategory = categoryMap[product.category] || 'other';\n        this.category.className = `card__category card__category_${englishCategory}`;\n        return this.container;\n    }\n    setButtonHandler(handler) {\n        this.button.addEventListener('click', handler);\n    }\n}\n","export class Api {\n    constructor(baseUrl, options = {}) {\n        var _a;\n        this.baseUrl = baseUrl;\n        this.options = {\n            headers: Object.assign({ 'Content-Type': 'application/json' }, ((_a = options.headers) !== null && _a !== void 0 ? _a : {}))\n        };\n    }\n    handleResponse(response) {\n        if (response.ok)\n            return response.json();\n        else\n            return response.json()\n                .then(data => { var _a; return Promise.reject((_a = data.error) !== null && _a !== void 0 ? _a : response.statusText); });\n    }\n    get(uri) {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method: 'GET' })).then(this.handleResponse);\n    }\n    post(uri, data, method = 'POST') {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method, body: JSON.stringify(data) })).then(this.handleResponse);\n    }\n}\n","export class Component {\n    constructor(container) {\n        this.container = container;\n    }\n    setText(element, text) {\n        element.textContent = text;\n    }\n    setImage(element, src, alt) {\n        element.src = src;\n        element.alt = alt;\n    }\n    setDisabled(element, state) {\n        if (state) {\n            element.setAttribute('disabled', 'true');\n        }\n        else {\n            element.removeAttribute('disabled');\n        }\n    }\n    toggleClass(element, className, state) {\n        if (state) {\n            element.classList.add(className);\n        }\n        else {\n            element.classList.remove(className);\n        }\n    }\n}\n","/**\n * Брокер событий, классическая реализация\n * В расширенных вариантах есть возможность подписаться на все события\n * или слушать события по шаблону например\n */\nexport class EventEmitter {\n    constructor() {\n        this._events = new Map();\n    }\n    /**\n     * Установить обработчик на событие\n     */\n    on(eventName, callback) {\n        var _a;\n        if (!this._events.has(eventName)) {\n            this._events.set(eventName, new Set());\n        }\n        (_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.add(callback);\n    }\n    /**\n     * Снять обработчик с события\n     */\n    off(eventName, callback) {\n        var _a;\n        if (this._events.has(eventName)) {\n            this._events.get(eventName).delete(callback);\n            if (((_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.size) === 0) {\n                this._events.delete(eventName);\n            }\n        }\n    }\n    /**\n     * Инициировать событие с данными\n     */\n    emit(eventName, data) {\n        this._events.forEach((subscribers, name) => {\n            if (name === '*')\n                subscribers.forEach(callback => callback({\n                    eventName,\n                    data\n                }));\n            if (name instanceof RegExp && name.test(eventName) || name === eventName) {\n                subscribers.forEach(callback => callback(data));\n            }\n        });\n    }\n    /**\n     * Слушать все события\n     */\n    onAll(callback) {\n        this.on(\"*\", callback);\n    }\n    /**\n     * Сбросить все обработчики\n     */\n    offAll() {\n        this._events = new Map();\n    }\n    /**\n     * Сделать коллбек триггер, генерирующий событие при вызове\n     */\n    trigger(eventName, context) {\n        return (event = {}) => {\n            this.emit(eventName, Object.assign(Object.assign({}, (event || {})), (context || {})));\n        };\n    }\n}\n","export const categoryMap = {\n    'софт-скил': 'soft',\n    'другое': 'other',\n    'дополнительное': 'additional',\n    'кнопка': 'button',\n    'хард-скил': 'hard'\n};\n","export const API_URL = `${process.env.API_ORIGIN}/api/weblarek`;\nexport const CDN_URL = `${process.env.API_ORIGIN}/content/weblarek`;\nexport const settings = {};\n","export function pascalToKebab(value) {\n    return value.replace(/([a-z0–9])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nexport function isSelector(x) {\n    return (typeof x === \"string\") && x.length > 1;\n}\nexport function isEmpty(value) {\n    return value === null || value === undefined;\n}\nexport function ensureAllElements(selectorElement, context = document) {\n    if (isSelector(selectorElement)) {\n        return Array.from(context.querySelectorAll(selectorElement));\n    }\n    if (selectorElement instanceof NodeList) {\n        return Array.from(selectorElement);\n    }\n    if (Array.isArray(selectorElement)) {\n        return selectorElement;\n    }\n    throw new Error(`Unknown selector element`);\n}\nexport function ensureElement(selectorElement, context) {\n    if (isSelector(selectorElement)) {\n        const elements = ensureAllElements(selectorElement, context);\n        if (elements.length > 1) {\n            console.warn(`selector ${selectorElement} return more then one element`);\n        }\n        if (elements.length === 0) {\n            throw new Error(`selector ${selectorElement} return nothing`);\n        }\n        return elements.pop();\n    }\n    if (selectorElement instanceof HTMLElement) {\n        return selectorElement;\n    }\n    throw new Error('Unknown selector element');\n}\nexport function cloneTemplate(query) {\n    const template = ensureElement(query);\n    return template.content.firstElementChild.cloneNode(true);\n}\nexport function bem(block, element, modifier) {\n    let name = block;\n    if (element)\n        name += `__${element}`;\n    if (modifier)\n        name += `_${modifier}`;\n    return {\n        name,\n        class: `.${name}`\n    };\n}\nexport function getObjectProperties(obj, filter) {\n    return Object.entries(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(obj)))\n        .filter(([name, prop]) => filter ? filter(name, prop) : (name !== 'constructor'))\n        .map(([name, prop]) => name);\n}\n/**\n * Устанавливает dataset атрибуты элемента\n */\nexport function setElementData(el, data) {\n    for (const key in data) {\n        el.dataset[key] = String(data[key]);\n    }\n}\n/**\n * Получает типизированные данные из dataset атрибутов элемента\n */\nexport function getElementData(el, scheme) {\n    const data = {};\n    for (const key in el.dataset) {\n        data[key] = scheme[key](el.dataset[key]);\n    }\n    return data;\n}\n/**\n * Проверка на простой объект\n */\nexport function isPlainObject(obj) {\n    const prototype = Object.getPrototypeOf(obj);\n    return prototype === Object.getPrototypeOf({}) ||\n        prototype === null;\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean';\n}\n/**\n * Фабрика DOM-элементов в простейшей реализации\n * здесь не учтено много факторов\n * в интернет можно найти более полные реализации\n */\nexport function createElement(tagName, props, children) {\n    const element = document.createElement(tagName);\n    if (props) {\n        for (const key in props) {\n            const value = props[key];\n            if (isPlainObject(value) && key === 'dataset') {\n                setElementData(element, value);\n            }\n            else {\n                // @ts-expect-error fix indexing later\n                element[key] = isBoolean(value) ? value : String(value);\n            }\n        }\n    }\n    if (children) {\n        for (const child of Array.isArray(children) ? children : [children]) {\n            element.append(child);\n        }\n    }\n    return element;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Api } from './components/base/api';\nimport { EventEmitter } from './components/base/events';\nimport { Basket } from './components/Basket';\nimport { Card } from './components/Card';\nimport { ContactsForm } from './components/ContactsForm';\nimport { Modal } from './components/Modal';\nimport { OrderForm } from './components/OrderForm';\nimport { ProductPreview } from './components/ProductPreview';\nimport './scss/styles.scss';\nimport { API_URL, CDN_URL } from './utils/constants';\nimport { cloneTemplate, ensureAllElements, ensureElement } from './utils/utils';\nconst events = new EventEmitter();\nconst api = new Api(API_URL);\nlet catalog = [];\nlet basketItems = [];\nconst basketList = ensureElement('.basket');\nconst gallery = ensureElement('.gallery');\nconst modals = ensureAllElements('.modal');\nconst basketButton = ensureElement('.header__basket');\nlet basketCounter = ensureElement('.header__basket-counter');\nconst previewModal = new Modal(modals[0]);\nconst basketModal = new Modal(modals[1]);\nconst orderModal = new Modal(modals[2]);\nconst basket = new Basket(basketList, events);\napi.get('/product').then((data) => {\n    console.log('API data:', data.items[0]); // посмотри структуру\n    catalog = data.items.map((item) => (Object.assign(Object.assign({}, item), { image: CDN_URL + item.image })));\n    catalog.forEach(product => {\n        const template = ensureElement('#card-catalog');\n        const cardElement = cloneTemplate(template);\n        const card = new Card(cardElement, events);\n        card.render(product);\n        gallery.appendChild(cardElement);\n    });\n});\nevents.on('card:click', (data) => {\n    const product = catalog.find(p => p.id === data.productId);\n    if (product) {\n        const template = ensureElement('#card-preview');\n        const previewContent = cloneTemplate(template);\n        const preview = new ProductPreview(previewContent);\n        preview.render(product);\n        preview.setButtonHandler(() => {\n            events.emit('basket:add', { productId: product.id });\n        });\n        previewModal.setContent(previewContent).open();\n    }\n});\nevents.on('basket:add', (data) => {\n    const product = catalog.find(p => p.id === data.productId);\n    if (product) {\n        basketItems.push({\n            product: product,\n            index: basketItems.length + 1\n        });\n        const total = basketItems.reduce((sum, item) => sum + item.product.price, 0);\n        basket.render(basketItems, total);\n        basketCounter.textContent = `${basketItems.length}`;\n        previewModal.close();\n    }\n});\nevents.on('basket:remove', (data) => {\n    basketItems = basketItems.filter(item => item.product.id !== data.productId);\n    const total = basketItems.reduce((sum, item) => sum + item.product.price, 0);\n    basket.render(basketItems, total);\n    basketCounter.textContent = `${basketItems.length}`;\n});\nevents.on('order:open', () => {\n    const template = ensureElement('#order');\n    const orderContent = cloneTemplate(template);\n    const orderForm = new OrderForm(orderContent);\n    orderForm.render();\n    orderForm.setPaymentHandler((paymethod) => {\n        console.log('Payment method:', paymethod);\n    });\n    orderForm.setAddressHandler((address) => {\n        console.log('Address:', address);\n    });\n    orderForm.setSubmitHandler((event) => {\n        event.preventDefault();\n        const orderValues = orderForm.getValues();\n        console.log('Order data:', orderValues);\n        // Переход к контактам\n        const contactsTemplate = ensureElement('#contacts');\n        const contactsContent = cloneTemplate(contactsTemplate);\n        const contactsForm = new ContactsForm(contactsContent);\n        contactsForm.render();\n        contactsForm.setSubmitHandler((event) => {\n            event.preventDefault();\n            const contactsValues = contactsForm.getValues();\n            console.log('Все данные:', Object.assign(Object.assign({}, orderValues), contactsValues));\n            // TODO: отправка заказа\n        });\n        orderModal.setContent(contactsContent);\n    });\n    orderModal.setContent(orderContent).open();\n    basketModal.close();\n});\n// УБЕРИ второй обработчик order:open - он дублирует первый\nbasketButton.addEventListener('click', () => {\n    const total = basketItems.reduce((sum, item) => sum + item.product.price, 0);\n    basket.render(basketItems, total);\n    basketModal.setContent(basketList).open();\n});\n"],"names":["Basket","_Component","_inherits","_super","_createSuper","container","events","_this","_classCallCheck","call","itemlist","ensureElement","totalprice","orderbutton","addEventListener","emit","_createClass","key","value","createBasketItem","item","_this2","template","basketitem","cloneTemplate","basketitemtitle","basketitemprice","basketitembutton","basketitemindex","textContent","product","title","concat","price","index","productId","id","render","items","_this3","this","innerHTML","forEach","itemElement","appendChild","length","classList","add","disabled","remove","Component","Card","image","category","data","src","englishCategory","categoryMap","className","ContactsForm","emailInput","phoneInput","submitButton","errorsContainer","setupPhoneMask","validateForm","email","phone","hideErrors","setSubmitHandler","handler","setEmailHandler","setPhoneHandler","validateEmail","test","validatePhone","formatPhone","cleaned","replace","numbers","startsWith","slice","_this4","event","input","target","cursorPosition","selectionStart","formatted","setSelectionRange","trim","isEmailValid","isPhoneValid","errors","push","showErrors","join","style","display","getValues","Modal","closeButton","close","handleOutsideClick","open","setContent","content","modalContent","OrderForm","paymentButtons","querySelectorAll","addressInput","address","button","isActive","name","paymethod","toggle","setPaymentHandler","btn","setAddressHandler","isAddressValid","isPaymentSelected","Array","from","some","contains","_a","find","ProductPreview","description","setButtonHandler","Api","baseUrl","options","arguments","undefined","headers","Object","assign","handleResponse","response","ok","json","then","Promise","reject","error","statusText","get","uri","fetch","method","post","body","JSON","stringify","setText","element","text","setImage","alt","setDisabled","state","setAttribute","removeAttribute","toggleClass","EventEmitter","_events","Map","on","eventName","callback","has","set","Set","off","size","subscribers","RegExp","onAll","offAll","trigger","context","API_URL","process","CDN_URL","settings","pascalToKebab","toLowerCase","isSelector","x","isEmpty","ensureAllElements","selectorElement","document","NodeList","isArray","Error","elements","console","warn","pop","HTMLElement","query","firstElementChild","cloneNode","bem","block","modifier","class","getObjectProperties","obj","filter","entries","getOwnPropertyDescriptors","getPrototypeOf","_ref","_ref2","_slicedToArray","prop","map","_ref3","_ref4","setElementData","el","dataset","String","getElementData","scheme","isPlainObject","prototype","isBoolean","v","createElement","tagName","props","children","_step","_iterator","_createForOfIteratorHelper","s","n","done","child","append","err","e","f","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","hasOwnProperty","r","Symbol","toStringTag","api","catalog","basketItems","basketList","gallery","modals","basketButton","basketCounter","previewModal","basketModal","orderModal","basket","log","cardElement","p","previewContent","preview","total","reduce","sum","orderContent","orderForm","preventDefault","orderValues","contactsTemplate","contactsContent","contactsForm","contactsValues"],"sourceRoot":""}